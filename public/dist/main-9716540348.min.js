"use strict";var validEmail=function(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},signupValidation=function(){$("#error_msg").text("");var e=$.trim($("#email").val()),r=$.trim($("#password").val()),t=$.trim($("#password2").val()),a=$.trim($("#username").val());return""===e||""===r||""===t?($("#error_msg").text("输入信息不能为空"),!1):validEmail(e)?""===a?($("#error_msg").text("用户名不能为空"),!1):r!==t?($("#error_msg").text("两次输入密码不一致"),!1):!(r.length<6)||($("#error_msg").text("密码长度不能小于6位"),!1):($("#error_msg").text("邮箱格式输入无法验证"),!1)},loginValidation=function(){$("#error_msg").text("");var e=$.trim($("#email").val()),r=$.trim($("#password").val());return""===e||""===r?($("#error_msg").text("输入信息不能为空"),!1):validEmail(e)?!(r.length<6)||($("#error_msg").text("密码长度不能小于6位"),!1):($("#error_msg").text("邮箱格式输入无法验证"),!1)};$(function(){var e=$("<button/>").addClass("btn btn-datax").prop("disabled",!0).text("处理中,请稍候...").on("click",function(){var e=$(this),r=e.data();e.off("click").text("已终止").on("click",function(){e.remove(),r.abort()}),r.submit().always(function(){e.remove()})});$("#user-header-photo-upload").fileupload({url:"/upload",dataType:"json",autoUpload:!1,acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,maxFileSize:999e3,disableImageResize:/Android(?!.*Chrome)|Opera/.test(window.navigator.userAgent),previewMaxWidth:100,previewMaxHeight:100,previewCrop:!0}).on("fileuploadadd",function(r,t){$("#user-header-photo").hide(),t.context=$("<div/>").appendTo("#files"),$.each(t.files,function(r,a){var n=$("<p/>").append($("<span/>").text(a.name));r||n.append("<br>").append(e.clone(!0).data(t)),n.appendTo(t.context)})}).on("fileuploadprocessalways",function(e,r){var t=r.index,a=r.files[t],n=$(r.context.children()[t]);a.preview&&n.prepend("<br>").prepend(a.preview),a.error&&n.append("<br>").append($('<span class="text-danger"/>').text(a.error)),t+1===r.files.length&&r.context.find("button").text("Upload").prop("disabled",!!r.files.error)}).on("fileuploadprogressall",function(e,r){var t=parseInt(r.loaded/r.total*100,10);$("#progress .progress-bar").css("width",t+"%")}).on("fileuploaddone",function(e,r){$.each(r.result.files,function(e,t){if(t.url){var a=$("<a>").attr("target","_blank").prop("href",t.url);$(r.context.children()[e]).wrap(a)}else if(t.error){var n=$('<span class="text-danger"/>').text(t.error);$(r.context.children()[e]).append("<br>").append(n)}})}).on("fileuploadfail",function(e,r){$.each(r.files,function(e){var t=$('<span class="text-danger"/>').text("文件上传失败.");$(r.context.children()[e]).append("<br>").append(t)})}).prop("disabled",!$.support.fileInput).parent().addClass($.support.fileInput?void 0:"disabled")});